
<mat-card class="example-card">
  <mat-card-header>
    <mat-card-title><h1>Todo list</h1></mat-card-title>
    <mat-card-subtitle>Manage your tasks</mat-card-subtitle>
  </mat-card-header>
  <mat-card-content>
    <form class="flex-form" [formGroup]="formTodo">
      <mat-form-field>
        <mat-label>Add todo</mat-label>
        <input matInput name="todo" formControlName="todo">
        <mat-error *ngIf="formTodo.get('todo')?.hasError('required') && formTodo.get('todo')?.touched">
          Please enter a task
        </mat-error>
      </mat-form-field>
      <mat-form-field>
        <mat-label>Email</mat-label>
        <input matInput name="email" formControlName="ownerMail">
        <mat-error *ngIf="formTodo.get('ownerMail')?.hasError('email') && formTodo.get('ownerMail')?.touched">
          Please enter a valid email address
        </mat-error>
      </mat-form-field>
      
        <button  mat-flat-button color="primary" type="button" (click)="addTask()" [disabled]="!formTodo.valid" >Add Task</button>
    </form>
  </mat-card-content>
 
</mat-card>


<div>
  <h2>Tasks list</h2>
  <div class="card-item"  *ngFor="let task of todoList">
    <div>
      <h3>{{task.name}}</h3>
      <p>Completed: {{task.completed}}</p>
      <p>Created at: {{task.createdAt |  date:'medium' }}</p>
      <p *ngIf="task.completedAt">Completed at: {{task.completedAt |  date:'medium' }}</p>
    </div>
    <div>
      <button *ngIf="!task.completedAt" (click)="completeTask(task.id)" >Complete</button>
      <button (click)="deleteTask(task.id)" >Delete</button>
    </div>
    
  </div>
  
</div>